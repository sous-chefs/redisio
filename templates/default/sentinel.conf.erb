# Example sentinel.conf

# redisio Cookbook additions
<% unless @job_control == 'upstart' %>
daemonize yes
<% end %>
pidfile <%= @piddir %>/sentinel_<%=@name%>.pid

# port <sentinel-port>
# The port that this sentinel instance will run on
port <%=@sentinel_port%>

<% @monitor.each do |m| %>
  sentinel monitor <%=m['master_name']%> <%=m['master_ip']%> <%=m['master_port']%> 2
  <% "sentinel auth-pass #{m['master_name']} #{m['auth-pass']}" unless m['authpass'].nil? %>
  sentinel down-after-milliseconds <%=m['master_name']%> <%=m['down-after-mil'] || '30000' %>
  sentinel can-failover <%=m['master_name']%> <%=m['can-failover'] || 'yes'%>
  sentinel parallel-syncs <%=m['master_name']%> <%=m['parallel-syncs'] || '1' %>
  sentinel failover-timeout <%=m['master_name']%> <%=m['failover-timeout'] || '900000'%>

<% end %>
